<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div>
        <button class="btn-floating btn-large waves-effect waves-light gray" id="increaseFieldBtn">
            <i class="material-icons right">add</i>
        </button>
        <button class="btn-floating btn-large waves-effect waves-light gray" id="decreaseFieldBtn">
            <i class="material-icons right">remove</i>
        </button>
    </div>

    <div class="input-field col s12">
        <select id="sequence-select">
            <option value="" disabled selected>Choose your option</option>
            <option value="1">Sequence</option>
            <option value="2">Random</option>
        </select>
        <label>Materialize Select</label>
    </div>

    <div>
        <ul id="fileFields">
        </ul>
    </div>
    <form>
        <button class="btn waves-effect waves-light" type="submit" name="action">Apply
            <i class="material-icons right">sync</i>
        </button>
    </form>
</body>

<script>
    const electron = require("electron")
    const { ipcRenderer, remote } = electron

    const form = document.querySelector("form")
    form.addEventListener("submit", (e, value) => {
        e.preventDefault()
        var fileFields = document.querySelector("#fileFields")
        var nodes = fileFields.children

        fileFields.children.forEach(element => {
            var filePath = element.getElementsByTagName("input")[0].files[0]
            var src = URL.createObjectURL(filePath)

            var audio = new Audio(src)
            audio.play()
        });
    })

    const fileFields = document.querySelector("#fileFields")

    const increaseField = document.querySelector("#increaseFieldBtn")
    increaseField.addEventListener("click", () => {
        var fileField = document.createElement("div")
        fileField.classList.add("file-field")
        fileField.classList.add("input-field")

        var btn = document.createElement("div")
        btn.classList.add("btn")
        btn.classList.add("blue")
        btn.appendChild(document.createElement("span").appendChild(document.createTextNode("File")))

        var input = document.createElement("input")
        input.className = "file-input"
        input.type = "file"
        btn.appendChild(input)
        fileField.appendChild(btn)

        var filePath = document.createElement("div")
        filePath.className = "file-path-wrapper"
        var filePathInput = document.createElement("input")
        filePathInput.classList.add("file-path")
        filePathInput.classList.add("validate")
        filePathInput.type = "text"
        filePath.appendChild(filePathInput)
        fileField.appendChild(filePath)

        fileFields.appendChild(fileField)
    })
    const decreaseField = document.querySelector("#decreaseFieldBtn")
    decreaseField.addEventListener("click", () => {
        if (fileFields.hasChildNodes() == false) {
            return
        }
        var last = fileFields.lastChild
        fileFields.removeChild(last)
    })

    const sequenceSelect = document.getElementById("sequence-select")
    sequenceSelect.addEventListener("change", (e) => {
        var value = sequenceSelect.value
        console.log(value)
    })

    document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('select');
        var instances = M.FormSelect.init(elems, null);
    })
</script>

</html>